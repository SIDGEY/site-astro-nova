---
import HeroBlock from './blocks/HeroBlock.astro';
import LogosBlock from './blocks/LogosBlock.astro';
import BenefitsBlock from './blocks/BenefitsBlock.astro';
import StatsBlock from './blocks/StatsBlock.astro';
import StepsBlock from './blocks/StepsBlock.astro';
import TestimonialsBlock from './blocks/TestimonialsBlock.astro';
import FaqBlock from './blocks/FaqBlock.astro';
import RichContentBlock from './blocks/RichContentBlock.astro';
import CtaBlock from './blocks/CtaBlock.astro';
import ImageCardsBlock from './blocks/ImageCardsBlock.astro';
import FeatureShowcaseBlock from './blocks/FeatureShowcaseBlock.astro';
// Astro Nova Game Blocks
import GameHeroBlock from "./blocks/GameHeroBlock.astro";
import GameFeaturesBlock from "./blocks/GameFeaturesBlock.astro";
import GameplayBlock from "./blocks/GameplayBlock.astro";
import GameGalleryBlock from "./blocks/GameGalleryBlock.astro";
import CommunityBlock from "./blocks/CommunityBlock.astro";
import { computeBgVariants } from "../utils/bgHelper";

interface Props {
    blocks?: any[];
    sectionVariants?: string[];
}

const { blocks = [], sectionVariants = [] } = Astro.props;
const bgVariants = computeBgVariants(blocks, sectionVariants);
---

{blocks.map((block, index) => {
  const commonProps = { ...block, bgVariant: bgVariants[index] };
  switch (block.type) {
    case 'hero':
      return <HeroBlock {...commonProps} />;
    case 'logos':
      return <LogosBlock {...commonProps} />;
    case 'benefits':
      return <BenefitsBlock {...commonProps} />;
    case 'stats':
      return <StatsBlock {...commonProps} />;
    case 'steps':
      return <StepsBlock {...commonProps} />;
    case 'testimonials':
      return <TestimonialsBlock {...commonProps} />;
    case 'faq':
      return <FaqBlock {...commonProps} />;
    case 'richContent':
      return <RichContentBlock {...commonProps} />;
    case 'cta':
      return <CtaBlock {...commonProps} />;

    case 'imageCards':
      return <ImageCardsBlock {...commonProps} />;
    case 'featureShowcase':
      return <FeatureShowcaseBlock {...commonProps} />;
case "gameHero":
                return <GameHeroBlock {...commonProps} />;
            case "gameFeatures":
                return <GameFeaturesBlock {...commonProps} />;
            case "gameplay":
                return <GameplayBlock {...commonProps} />;
            case "gameGallery":
                return <GameGalleryBlock {...commonProps} />;
            case "community":
                return <CommunityBlock {...commonProps} />;
    default:
      return null;
  }
})}
