---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlockRenderer from '../../components/BlockRenderer.astro';

export async function getStaticPaths() {
  const landings = await getCollection('landings');
  return landings.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { title, description, blocks, sectionVariants } = entry.data;
const canonicalURL = `https://atecna-2026.fr/l/${entry.slug}`;
---

<BaseLayout {title} {description} {canonicalURL}>
  <BlockRenderer {blocks} {sectionVariants} />
</BaseLayout>
