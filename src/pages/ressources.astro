---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';

const articles = await getCollection('articles', ({ data }) => !data.draft);
const sortedArticles = articles.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const breadcrumbs = [
  { name: 'Accueil', item: 'https://atecna-2026.fr/' },
  { name: 'Ressources', item: 'https://atecna-2026.fr/ressources' }
];
---

<BaseLayout 
  title="Ressources & Insights | Atecna" 
  description="Décryptage, tendances et guides pratiques sur l'IA et la Data."
  breadcrumbs={breadcrumbs}
>
  <div class="container-custom py-16 md:py-24">
    <header class="mb-20">
      <h1 class="text-5xl md:text-7xl font-bold mb-8 text-text leading-tight tracking-tight">
        Insights <span class="text-primary">Tech.</span>
      </h1>
      <p class="text-xl md:text-2xl text-muted max-w-3xl leading-relaxed font-medium">
        Décryptages, tendances et guides pratiques pour naviguer dans le futur de l'IA et de la Data.
      </p>
    </header>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
      {sortedArticles.map(entry => (
        <article class="flex flex-col h-full card-basic !p-0 overflow-hidden group hover:border-primary/30">
          <div class="p-10 flex flex-col h-full space-y-6">
            <div class="flex gap-3">
              {entry.data.tags.slice(0, 2).map(tag => (
                <span class="badge">
                  {tag}
                </span>
              ))}
            </div>
            <h2 class="text-2xl font-bold text-text group-hover:text-primary transition-colors leading-snug">
              <a href={`/blog/${entry.slug}`} class="focus:outline-none">
                {entry.data.title}
              </a>
            </h2>
            <p class="text-muted text-base line-clamp-3 leading-relaxed flex-grow">
              {entry.data.description}
            </p>
            <div class="flex items-center justify-between pt-8 border-t border-border/50 mt-auto">
              <div class="flex flex-col">
                <span class="text-xs font-bold text-text uppercase tracking-widest">{entry.data.author}</span>
                <time class="text-xs text-muted mt-1" datetime={entry.data.date.toISOString()}>
                  {entry.data.date.toLocaleDateString('fr-FR', { day: 'numeric', month: 'short', year: 'numeric' })}
                </time>
              </div>
              <span class="w-10 h-10 rounded-full bg-surface-2 flex items-center justify-center text-primary group-hover:bg-primary group-hover:text-primary-contrast transition-colors duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
              </span>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</BaseLayout>
